
export const collectClaimPoints = ({
    phone_number,
    point_code,
  }: ClaimPoints) => {
    const query = useQuery({
      queryKey: ["claim", phone_number, point_code],
      queryFn: () => claimPoints({ phone_number, point_code }),
    });
 
    return query;
  };

  
import { useQuery } from "@tanstack/react-query";
import axios from "axios";
 
export const register = async (phoneNumber: string) => {
  const res = await axios.post("/customer/register/account", phoneNumber);
  return res;
};
 
export const useRegister = (phone_number: string, queryEnabled: boolean) => {
  const query = useQuery({
    queryKey: ["register", phone_number],
    queryFn: () => register(phone_number),
    enabled: queryEnabled,
  });
 
  return query;
};
 
[1/8 4:01 PM] Saw Soe Htut Win
import { useEffect, useState } from "react";
import { useRegister } from "../api/features/register/register";
import PhoneNoBox from "../components/PhoneNoBox";
import Button from "../components/common/Button";
import PageLayout from "../components/common/PageLayout";
import CustomModal from "../components/common/modal/CustomModal";
 
export default function EnterPhoneNo() {
  const [phoneNumber, setPhoneNumber] = useState<string>("");
  const [isModalOpen, setIsModalOpen] = useState<boolean>(false);
  const [queryEnable, setQueryEnable] = useState<boolean>(false);
 
  const { isSuccess, isPending, isError, data, error } = useRegister(
    phoneNumber,
    queryEnable
  );
 
  const handleContinueBtn = () => {
    setIsModalOpen(true);
    setQueryEnable(true);
  };
 
  if (isSuccess) {
    console.log(data);
  }
 
  useEffect(() => {
    if (!queryEnable) {
      setQueryEnable(false);
    }
  }, [queryEnable]);
 
  return (
    <PageLayout>
      <div className="form-box">
        <PhoneNoBox
          labelText="Enter Mobile Number"
          phoneNumber={phoneNumber}
          setPhoneNumber={setPhoneNumber}
        />
      </div>
 
      <div className="btn--footer">
        <Button
          text="Continue"
          disabled={phoneNumber === ""}
          onClick={handleContinueBtn}
        />
      </div>
 
      {isModalOpen && (
        <CustomModal isOpen={isModalOpen} setIsOpen={setIsModalOpen} />
      )}
    </PageLayout>
  );
}
 